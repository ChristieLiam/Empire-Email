<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Email | Empire Email</title>

    <!-- Linking to Bootstrap for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<!-- Navbar with navigation links -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/home">Empire Email</a> <!-- Home link -->
        <button aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"
                data-bs-target="#navbarNav" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/home">Home</a> <!-- Home link -->
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/home/inbox">Inbox</a> <!-- Inbox link -->
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/home/sent">Sent</a> <!-- Sent messages link -->
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/home/send">Send an Email</a> <!-- Link to send email -->
                </li>
                <li class="nav-item">
                    <button class="btn btn-danger" onclick="logout()">Logout</button> <!-- Logout button -->
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Main Content Area -->
<div class="container my-4">
    <div class="card shadow rounded-4" style="border: 1px solid #dee2e6; border-collapse: separate; border-spacing: 0;">
        <div class="card-body">
            <!-- Placeholder for dynamic content, potentially emails or data -->
            <div class="table-responsive">
                <div id="switchMeOut"></div> <!-- Will be replaced with dynamic content -->
            </div>
        </div>
    </div>
</div>

<!-- Footer Section -->
<footer class="bg-primary text-white text-center py-3 mt-5">
    <p class="mb-0">2025 Copyright &copy; This Website</p>
</footer>

<!-- JavaScript for functionality -->
<script>

    // Logout function
    function logout() {
        fetch('/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json', // Setting the content type for the POST request
            },
        })
            .then(response => response.json()) // Parse response as JSON
            .then(data => {
                alert("Successfully Logged Out."); // Alert on successful logout
                window.location.href = "/"; // Redirect to the homepage
            })
            .catch(error => {
                console.error('Error logging out:', error); // Handle any logout errors
            });
    }

    // Auto-refresh inbox every 60 seconds (only on the inbox page)
    if (window.location.pathname === "/home/inbox") {
        setInterval(() => {
            location.reload(); // Reload the page every 60 seconds
        }, 60000);
    }
</script>

</body>
</html>
